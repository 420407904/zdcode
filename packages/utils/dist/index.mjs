import{clone as m,flattenDeep as w}from"lodash";var E=function(e=[],t,r){let n={};return Array.isArray(t)?e.forEach(o=>{n[o[t[0]]]=r?Object.assign(o,m(r)):o[t[1]]}):e.forEach(o=>{n[o[t]]=r?Object.assign(o,m(r)):o}),n},F=function(e,t){function r(n){return function(o,i){var s=n?o[n]:o,c=n?i[n]:i;if(typeof s=="number"&&typeof c=="number")return s-c}}return e.sort(r(t))},D=function(e,t){function r(n){return function(o,i){var s=n?o[n]:o,c=n?i[n]:i;if(typeof s=="number"&&typeof c=="number")return c-s}}return e.sort(r(t))},K=(e,t)=>{let r=n=>n[t]?[n,n[t].map(r)]:n;return w(e.map(r))},S=(e,t)=>e.map(r=>{let n={};return t.forEach(o=>{n[o]=r[o]}),n});import x from"path";import a from"fs";var k=e=>{let t=x.resolve(process.cwd(),e);return a.readFileSync(t,{encoding:"utf-8"})},$=e=>{let t=x.resolve(process.cwd(),e),r=a.readFileSync(t,{encoding:"utf-8"});try{return JSON.parse(r)}catch{return{}}},u=e=>new Promise((t,r)=>{a.access(e,n=>{t(!n)})}),j=async(e,t,r)=>{if(await u(e))return console.log("\u26A0\uFE0F \u6587\u4EF6\u5DF2\u5B58\u5728\uFF1A",e);let o=e.split("/"),i=o[o.length-1],s=e.replace(RegExp(`${i}$`),"");await g(s,{basePath:r}),a.writeFileSync(e,t,"utf8")},g=async(e,t)=>{let{basePath:r=""}=t||{};RegExp(`^${r}`).test(e)||console.warn("\u4F20\u5165\u591A\u8DEF\u5F84\u4E0D\u662F\u4EE5",r,"\u5F00\u5934\uFF0C\u914D\u7F6E\u65E0\u6548\uFF01");let o=e.replace(r,"").replace(/^\//,"").split("/");for(;o.length;){let i=o.shift(),s=`${r}/${i}`,c=await u(s);try{c||a.mkdirSync(s)}catch(l){if(l&&l.message&&!l.message.includes("file already exists"))throw new Error(l)}finally{r=s}}},v=async(e,t,r)=>{if(await u(e))return console.log("\u26A0\uFE0F \u6587\u4EF6\u5DF2\u5B58\u5728\uFF1A",e);let o=e.split("/"),i=o[o.length-1],s=e.replace(RegExp(`${i}$`),"");return await g(s,{basePath:r}),new Promise((c,l)=>{let T=a.createReadStream(t.path),p=a.createWriteStream(e);T.pipe(p);let f=!1;p.on("error",y=>{f=!0,p.destroy(),l(y)}),p.on("finish",()=>{f||(c("finish"),p.close())})})};var L=e=>e.then(t=>[t]).catch(t=>[null,t]),h=(e,t=!0)=>{if(e.status==="fulfilled")return[e.value];if(t)throw new Error(e.reason);return[null,e.reason]},O=(e,t=!0)=>e.map(r=>h(r,t));var d=e=>{let t=e[0].charCodeAt(0);return t>=65&&t<=90},U=e=>{let t=e[0].charCodeAt(0);return t>=97&&t<=122};function W(e){return e.charAt(0).toUpperCase()+e.slice(1)}function q(e){return e.charAt(0).toLowerCase()+e.slice(1)}var z=e=>e.split("").map(t=>d(t)?`-${t.toLowerCase()}`:t).join("");export{E as arr2Dic,u as checkExist,g as createDir,v as createFile,K as flattenDeepByField,O as getAllSettledPromiseData,k as getProjectFile,$ as getProjectJsonFile,L as getPromiseData,h as getSettledData,z as humpToChain,U as isLowerCase,d as isUpperCase,q as lowerFirstLetter,S as mapFields,F as sortAsc,D as sortDesc,W as upperFirstLetter,j as writeFile};
