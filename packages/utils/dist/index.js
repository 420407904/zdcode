"use strict";var F=Object.create;var f=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var A=(e,t)=>{for(var r in t)f(e,r,{get:t[r],enumerable:!0})},y=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of K(t))!C.call(e,n)&&n!==r&&f(e,n,{get:()=>t[n],enumerable:!(o=D(t,n))||o.enumerable});return e};var w=(e,t,r)=>(r=e!=null?F(S(e)):{},y(t||!e||!e.__esModule?f(r,"default",{value:e,enumerable:!0}):r,e)),b=e=>y(f({},"__esModule",{value:!0}),e);var H={};A(H,{arr2Dic:()=>k,checkExist:()=>m,createDir:()=>g,createFile:()=>U,flattenDeepByField:()=>v,getAllSettledPromiseData:()=>B,getProjectFile:()=>L,getProjectJsonFile:()=>O,getPromiseData:()=>J,getSettledData:()=>h,humpToChain:()=>G,isLowerCase:()=>W,isUpperCase:()=>d,lowerFirstLetter:()=>z,mapFields:()=>R,sortAsc:()=>$,sortDesc:()=>j,upperFirstLetter:()=>q,writeFile:()=>N});module.exports=b(H);var u=require("lodash"),k=function(e=[],t,r){let o={};return Array.isArray(t)?e.forEach(n=>{o[n[t[0]]]=r?Object.assign(n,(0,u.clone)(r)):n[t[1]]}):e.forEach(n=>{o[n[t]]=r?Object.assign(n,(0,u.clone)(r)):n}),o},$=function(e,t){function r(o){return function(n,i){var s=o?n[o]:n,c=o?i[o]:i;if(typeof s=="number"&&typeof c=="number")return s-c}}return e.sort(r(t))},j=function(e,t){function r(o){return function(n,i){var s=o?n[o]:n,c=o?i[o]:i;if(typeof s=="number"&&typeof c=="number")return c-s}}return e.sort(r(t))},v=(e,t)=>{let r=o=>o[t]?[o,o[t].map(r)]:o;return(0,u.flattenDeep)(e.map(r))},R=(e,t)=>e.map(r=>{let o={};return t.forEach(n=>{o[n]=r[n]}),o});var x=w(require("path")),a=w(require("fs")),L=e=>{let t=x.default.resolve(process.cwd(),e);return a.default.readFileSync(t,{encoding:"utf-8"})},O=e=>{let t=x.default.resolve(process.cwd(),e),r=a.default.readFileSync(t,{encoding:"utf-8"});try{return JSON.parse(r)}catch{return{}}},m=e=>new Promise((t,r)=>{a.default.access(e,o=>{t(!o)})}),N=async(e,t,r)=>{if(await m(e))return console.log("\u26A0\uFE0F \u6587\u4EF6\u5DF2\u5B58\u5728\uFF1A",e);let n=e.split("/"),i=n[n.length-1],s=e.replace(RegExp(`${i}$`),"");await g(s,{basePath:r}),a.default.writeFileSync(e,t,"utf8")},g=async(e,t)=>{let{basePath:r=""}=t||{};RegExp(`^${r}`).test(e)||console.warn("\u4F20\u5165\u591A\u8DEF\u5F84\u4E0D\u662F\u4EE5",r,"\u5F00\u5934\uFF0C\u914D\u7F6E\u65E0\u6548\uFF01");let n=e.replace(r,"").replace(/^\//,"").split("/");for(;n.length;){let i=n.shift(),s=`${r}/${i}`,c=await m(s);try{c||a.default.mkdirSync(s)}catch(l){if(l&&l.message&&!l.message.includes("file already exists"))throw new Error(l)}finally{r=s}}},U=async(e,t,r)=>{if(await m(e))return console.log("\u26A0\uFE0F \u6587\u4EF6\u5DF2\u5B58\u5728\uFF1A",e);let n=e.split("/"),i=n[n.length-1],s=e.replace(RegExp(`${i}$`),"");return await g(s,{basePath:r}),new Promise((c,l)=>{let P=a.default.createReadStream(t.path),p=a.default.createWriteStream(e);P.pipe(p);let T=!1;p.on("error",E=>{T=!0,p.destroy(),l(E)}),p.on("finish",()=>{T||(c("finish"),p.close())})})};var J=e=>e.then(t=>[t]).catch(t=>[null,t]),h=(e,t=!0)=>{if(e.status==="fulfilled")return[e.value];if(t)throw new Error(e.reason);return[null,e.reason]},B=(e,t=!0)=>e.map(r=>h(r,t));var d=e=>{let t=e[0].charCodeAt(0);return t>=65&&t<=90},W=e=>{let t=e[0].charCodeAt(0);return t>=97&&t<=122};function q(e){return e.charAt(0).toUpperCase()+e.slice(1)}function z(e){return e.charAt(0).toLowerCase()+e.slice(1)}var G=e=>e.split("").map(t=>d(t)?`-${t.toLowerCase()}`:t).join("");0&&(module.exports={arr2Dic,checkExist,createDir,createFile,flattenDeepByField,getAllSettledPromiseData,getProjectFile,getProjectJsonFile,getPromiseData,getSettledData,humpToChain,isLowerCase,isUpperCase,lowerFirstLetter,mapFields,sortAsc,sortDesc,upperFirstLetter,writeFile});
