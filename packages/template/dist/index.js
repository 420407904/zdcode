"use strict";var v=Object.create;var p=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var E=(t,e)=>{for(var o in e)p(t,o,{get:e[o],enumerable:!0})},h=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of A(e))!j.call(t,r)&&r!==o&&p(t,r,{get:()=>e[r],enumerable:!(n=L(e,r))||n.enumerable});return t};var l=(t,e,o)=>(o=t!=null?v(R(t)):{},h(e||!t||!t.__esModule?p(o,"default",{value:t,enumerable:!0}):o,t)),O=t=>h(p({},"__esModule",{value:!0}),t);var z={};E(z,{default:()=>q});module.exports=O(z);var d=l(require("chalk")),F=require("@zdcode/utils");var g=l(require("inquirer"));async function $(t,e){let{action:o}=await g.default.prompt([{name:"action",type:"list",message:t,choices:e}]);return o}var x=async t=>{let{action:e}=await g.default.prompt([{name:"action",type:"input",message:t}]);return e};var T=l(require("path")),C=l(require("chalk")),f=require("@zdcode/utils");function P(t){return t.charAt(0).toUpperCase()+t.slice(1)}function k(t){return t.charAt(0).toLowerCase()+t.slice(1)}var y={F:P,f:k},u=(t,e)=>{let o=t.match(/(\$T\{)([A-Za-z | _])+(\})/g);return o&&(o=Array.from(new Set(o)),o.map(r=>{let s=r.slice(3).slice(0,-1).split("|");return{content:r,formats:s.slice(0,-1),name:s.slice(-1)[0]}}).forEach(({content:r,formats:s,name:i})=>{let a=e[i];for(let m of s)y[m]&&(a=y[m](a));t=t.replace(new RegExp(r.replace("$","\\$").replace("{","\\{").replace("}","\\}").replace("|","\\|"),"g"),a)})),t};var w=async(t,e,o)=>{for(let n of e){let r=u(n.name,o);if(n.files){await w(`${t}/${r}`,n.files,o);return}if(n.template){let s=n.template,i=(0,f.getProjectFile)(`.templates/${s}`),c=u(i,o);await(0,f.writeFile)(T.default.resolve(process.cwd(),`${t}/${r}`),c),console.log("\u{1F389}",C.default.gray(`${t}/${r}`))}}};var b=t=>{t.command("template").description("\u5FEB\u901F\u521B\u5EFA\u6A21\u677F\u6587\u4EF6").action(async()=>{let e=(0,F.getProjectJsonFile)(".templates/template.json"),o=await $("\u8BF7\u9009\u62E9\u6A21\u677F",e.map(({name:a})=>({name:a,value:a}))),n=e.find(({name:a})=>a===o);if(!n)throw new Error("\u6A21\u677F\u5F02\u5E38\uFF01");let{params:r=[],root:s,templates:i}=n,c={};if(r.length)for(let a of r){let m=await x(`\u8BF7\u8F93\u5165 ${a}:`);c[a]=m}console.log(""),console.log("\u{1F433}",d.default.gray("\u5F00\u59CB\u751F\u6210\u6A21\u677F\u6587\u4EF6")),console.log(""),await w(s,i,c),console.log(""),console.log("\u{1F433}",d.default.green("success!")),console.log("")})},q=b;0&&(module.exports={});
